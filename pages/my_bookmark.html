<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 북마크</title>
    <style>
    :root {
        /* 메인페이지에서 사용할 색상을 변수로 정의해 재사용하는 방법 */
        --primary-color: #2c3e50;
        --secondary-color: #34495e;
        --accent-color: #ce7c2e;
        --background-color: #ecf0f1;
        --light-text-color: #fff;
        --dark-bg-color: #2c3e50;
        --brown-text-color: #333;
    }

    /* 모든 요소의 기본 여백과 패딩을 제거 & 박스 모델 통일 */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    /* 폰트 임포트 */
/* 숙명눈꽃체 (임시)*/
@font-face {
font-family: 'SMUSnowflake-Bold';
src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2409-2@1.0/SMUSnowflake-Bold.woff2') format('woff2');
font-weight: 700;
font-style: normal;
}
/* 조선일보명조체 */
@font-face {
font-family: 'Chosunilbo_myungjo';
src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Chosunilbo_myungjo.woff') format('woff');
font-weight: normal;
font-style: normal;
}
/* 에스코어드림 */
@font-face {
font-family: 'S-CoreDream-3Light';
src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff') format('woff');
font-weight: normal;
font-style: normal;
}

body {
        font-family: 'S-CoreDream-3Light', sans-serif;
        background-color: #f8f9fa;
        color: var(--brown-text-color);
        line-height: 1.6;
    }


    header {
        font-family: 'S-CoreDream-3Light';
        background-color: var(--primary-color);
        padding: 14px 8px 8px 20px;
        position: sticky; /* 스크롤 시에도 상단에 고정 */
        top: 0;
        z-index: 1000; /* 다른 요소 위에 표시 */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .header-content {
        display: flex;
        justify-content: space-between; /* 좌우로 배치 */
        align-items: center; /* 세로 정렬 가운데 */
        max-width: 1200px;
        margin: 0 auto;
    }

    .logo img {
        height: 60px;
        width: auto;
    }

    /* 내비게이션 스타일 */
    nav ul {
        
        display: flex;
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    /* 내비게이션 요소들간 간격 설정 */
    nav ul li {
        position: relative;
        margin-right: 1.5rem;
    }

    /* 내비게이션 링크 스타일 */
    nav a {
        color: var(--light-text-color);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
    }

    nav a:hover {
        color: var(--accent-color); /* 마우스 커서 가면 해당 색상으로 변경 */
    }

    nav ul ul {
        display: none; /* 드롭다운 메뉴 숨김 */
        position: absolute;
        top: 100%;
        left: 0;
        background-color: var(--secondary-color); /* 배경색 설정 */
        border-radius: 4px;
        padding: 0.5rem 0;
        min-width: 150px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    /* 마우스 커서가 상위 항목에 올라가면 하위 항목이 표시 */
    nav ul li:hover > ul {
        display: block;
    }

    /* 드롭다운 항목들간 간격 설정 */
    nav ul ul li {
        margin: 0;
        padding: 0.5rem 1rem;
    }

    /* 드롭다운 항목에 마우스 커서가 올라갔을 때 배경색 설정 */
    nav ul ul li a:hover {
        background-color: var(--secondary-color);
    }

    .search-bar {
        display: flex;
        align-items: center;
        margin-right: 1rem; /* 로그아웃/프로필 버튼과의 간격 조정 */
    }

    .search-bar input {
        padding: 0.5rem;
        border: 1px solid var(--primary-color);
        border-radius: 20px 0 0 20px;
        outline: none; /* 선택 시 윤곽선 제거 */
    }

    .search-bar button {
        background-color: var(--accent-color); 
        color: var(--light-text-color);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 0 20px 20px 0;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .search-bar button:hover {
        background-color: var(--primary-color); 
    }

    /* 버튼 스타일 */
    .user-actions {
        display: flex;
        align-items: center;
        
    }


    .user-actions button {
        
        color: var(--dark-bg-color);
        border: none;
        padding: 0.5rem 1rem;
        margin-left: 0.5rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 800;          /* 버튼 텍스트 굵기 조절*/
        font-family: 'S-CoreDream-3Light';
    }

    .user-actions button:hover {
        background-color: var(--primary-color);
        color: var(--light-text-color);
    }

    /* 프로필 버튼 아이콘 스타일 */
    .profile-button {
        background-color: var(--light-text-color); /* 배경색 제거 */
        border: none;
        padding: 0.5rem 1rem;
        margin-left: 0.5rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
                color: var(--dark-bg-color);
            }
    .profile-button:hover {
        background-color: var(--primary-color);
        color: var(--light-text-color);
    }

main {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 2rem;
    }

    h1 {
        font-family: 'SMUSnowflake-Bold';
        font-size: 2.5rem;
        color: #2c3e50;
        text-align: center;
        margin-bottom: 2rem;
        padding: 2rem;
    }

    section {
        margin-bottom: 3rem;
    }

    h2 {
        font-family: 'SMUSnowflake-Bold';
        font-size: 1.8rem;
        color: #34495e;
        margin-bottom: 1rem;
        padding: 20px 60px;
    }

    .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.5rem;
    }

    .bookmark-item {
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
    }

    .bookmark-item:hover {
        transform: translateY(-5px);
    }

    .bookmark-item img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        cursor: pointer;
    }

    #no-bookmarks-message {
        text-align: center;
        font-size: 1.2rem;
        color: #7f8c8d;
        margin-top: 2rem;
    }

    footer {
            background-color: var(--primary-color);
            color: #fff;
            padding: 2rem 0;
            margin-top: 3rem;
            position: absolute;
            bottom: 0;
            width: 100%;

        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
        }

        .team-members a {
            color: #fff;
            text-decoration: none;
            margin-right: 1rem;
            transition: color 0.3s ease;
        }

        .team-members a:hover {
            color: var(--accent-color);
        }
</style>



    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
</head>

<body>
    <header>
        <div class="header-content">
            <a href="/" class="logo">
                <img src="/src/images/002.png" alt="방텐더 로고">
        </a>
        <nav>
            <ul>
            <li>
                <a href="pages/liquor_list.html">주류</a> <!-- '주류' 상위 링크는 liquor_list.html로 이동 -->
                <ul>
                    <li><a href="pages/liquor_list.html?classification=rum" class="category-link"
                            data-classification="rum">럼</a></li>
                    <li><a href="pages/liquor_list.html?classification=liqueur" class="category-link"
                            data-classification="liqueur">리큐르</a></li>
                    <li><a href="pages/liquor_list.html?classification=vodka" class="category-link"
                            data-classification="vodka">보드카</a></li>
                    <li><a href="pages/liquor_list.html?classification=brandy" class="category-link"
                            data-classification="brandy">브랜디</a></li>
                    <li><a href="pages/liquor_list.html?classification=whiskey" class="category-link"
                            data-classification="whiskey">위스키</a></li>
                    <li><a href="pages/liquor_list.html?classification=gin" class="category-link"
                            data-classification="gin">진</a></li>
                    <li><a href="pages/liquor_list.html?classification=others" class="category-link"
                            data-classification="others">기타</a></li>
                </ul>
            </li>
            <!-- 칵테일 메뉴 -->
            <li><a href="pages/cocktail_list.html">칵테일</a></li>

            <!-- 방텐더봇 메뉴 -->
            <li><a href="pages/bot.html">방텐더봇</a></li>

            <!-- 주변 매장 찾기 메뉴 -->
            <li><a href="pages/liquor_stores.html">주변 매장 찾기</a></li>
        </nav>
        <div class="search-bar">
            <input type="search" placeholder="Search">
            <button>검색</button>
        </div>
        <div class="user-actions">
            <button id="logout-button">로그아웃</button>
            <a href="profile.html" id="auth-link">
                <button class="profile-button" id="auth-button">프로필</button>
            </a>
        </div>
    </div>
</header>

    <h1>내 북마크</h1>

<section>
    <h2>북마크한 주류</h2>
    <div className="grid-container" id="liquor-bookmarks">
        <div className="bookmark-item">
        <img src="/placeholder.svg?height=200&width=200" alt="주류 1" />
        </div>
        <div className="bookmark-item">
        <img src="/placeholder.svg?height=200&width=200" alt="주류 2" />
        </div>
        <div className="bookmark-item">
        <img src="/placeholder.svg?height=200&width=200" alt="주류 3" />
        </div>
    </div>
    </section>

    <section>
    <h2>북마크한 칵테일</h2>
    <div className="grid-container" id="cocktail-bookmarks">
        <div className="bookmark-item">
        <img src="/placeholder.svg?height=200&width=200" alt="칵테일 1" />
        </div>
        <div className="bookmark-item">
        <img src="/placeholder.svg?height=200&width=200" alt="칵테일 2" />
        </div>
    </div>
    </section>

    <p id="no-bookmarks-message" style="display: none;">북마크한 항목이 없습니다.</p>

    <footer>
        <div class="footer-content">
            <div class="team-members">
                <a href="https://queseraseralife.tistory.com/" target="_blank">김동민</a>
                <a href="https://zhelddustmq.tistory.com/" target="_blank">김진영</a>
                <a href="https://velog.io/@mimi3123832/posts" target="_blank">남지민</a>
                <a href="https://insight986.tistory.com/" target="_blank">배민석</a>
            </div>
            <p>&copy; 2024 방텐더. All rights reserved.</p>
        </div>
    </footer>
        
    </body>


    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const token = localStorage.getItem('access_token');
            if (!token) {
                alert("로그인이 필요합니다.");
                window.location.href = '/pages/login.html';
                return;
            }

            try {
                // JWT 토큰에서 user_id 추출
                const decodedToken = jwt_decode(token);
                const userId = decodedToken.user_id;

                // 북마크 데이터 요청
                const response = await fetch(`http://localhost:8000/api/v1/accounts/${userId}/bookmark/`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('북마크 데이터를 불러오는 데 실패했습니다.');
                }

                const data = await response.json();
                const liquorBookmarks = data.liquor;
                const cocktailBookmarks = data.cocktail;

                const liquorContainer = document.getElementById('liquor-bookmarks');
                const cocktailContainer = document.getElementById('cocktail-bookmarks');
                const noBookmarksMessage = document.getElementById('no-bookmarks-message');

                liquorContainer.innerHTML = '';
                cocktailContainer.innerHTML = '';

                // 북마크한 주류 표시
                if (liquorBookmarks.length > 0) {
                    liquorBookmarks.forEach(liquor => {
                        const liquorItem = document.createElement('div');
                        liquorItem.classList.add('bookmark-item');
                        const imgElement = document.createElement('img');
                        imgElement.src = `http://localhost:8000${liquor.img}`;
                        imgElement.alt = liquor.name;
                        imgElement.addEventListener('click', () => {
                            window.location.href = `liquor_detail.html?id=${liquor.id}`;  // 주류 상세 페이지로 이동
                        });
                        liquorItem.appendChild(imgElement);
                        liquorContainer.appendChild(liquorItem);
                    });
                }

                // 북마크한 칵테일 표시
                if (cocktailBookmarks.length > 0) {
                    cocktailBookmarks.forEach(cocktail => {
                        const cocktailItem = document.createElement('div');
                        cocktailItem.classList.add('bookmark-item');
                        const imgElement = document.createElement('img');
                        imgElement.src = `http://localhost:8000${cocktail.img}`;
                        imgElement.alt = cocktail.name;
                        imgElement.addEventListener('click', () => {
                            window.location.href = `cocktail_detail.html?id=${cocktail.id}`;  // 칵테일 상세 페이지로 이동
                        });
                        cocktailItem.appendChild(imgElement);
                        cocktailContainer.appendChild(cocktailItem);
                    });
                }

                // 북마크한 항목이 없을 때 메시지 표시
                if (liquorBookmarks.length === 0 && cocktailBookmarks.length === 0) {
                    noBookmarksMessage.style.display = 'block';
                }

            } catch (error) {
                console.error('북마크 데이터를 불러오는 중 오류 발생:', error);
                alert('북마크 데이터를 불러오는 데 오류가 발생했습니다.');
            }
        });
    </script>
</body>

</html>